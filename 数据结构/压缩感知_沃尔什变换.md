# 沃尔什变换

转自：[沃爾什轉換](https://zh.wikipedia.org/wiki/%E6%B2%83%E7%88%BE%E4%BB%80%E8%BD%89%E6%8F%9B)

图像数据越是均匀分布，经过沃尔什-哈达玛变换后的数据越是集中于矩阵的边角上，因此沃尔什变换具有能量集中的性质，可以用于压缩图像信息。

## 轉換公式

沃爾什轉換的轉換式為：

$$
F[m]=\sum_{n=0}^{N-1} f[n] W[m, n]
$$

其中 $W[m, n]$是沃爾什轉換矩陣的第（m,n）個元素。

沃爾什轉換的反轉換式為
$$
f[m]=\frac{1}{N} \sum_{n=0}^{N-1} F[n] W[m, n]
$$

注意到正轉換式與反轉換式只差了一個常數，這是由於沃爾什轉換矩陣的反矩陣就是自己的轉置矩陣乘上一個常數的緣故。

-----

## 沃爾什轉換矩陣的產生

$2^{k}$點的沃爾什矩陣可以用下面的遞迴方式產生：起始值$k=1$（2點沃爾什轉換矩陣）

$$
W_{2}=\left( \begin{array}{cc}{1} & {1} \\ {1} & {-1}\end{array}\right)
$$

**Step 1** 定義$V_{2^{k+1}}=\left( \begin{array}{cc}{W_{2^{k}}} & {W_{2^{k}}} \\ {W_{2^{k}}} & {-W_{2^{k}}}\end{array}\right)$

**Step 2** 根據變號次數（正負號改變次數）把$V_{2^{k+1}}$的列（row）重新排列成為$W_{2^{k+1}}$。

4*4
$$
W_{4}=\left( \begin{array}{cccc}{1} & {1} & {1} & {1} \\ {1} & {-1} & {1} & {-1} \\ {1} & {1} & {-1} & {-1} \\ {1} & {-1} & {-1} & {1}\end{array}\right)
$$

8*8

$$
V_{8}=\left( \begin{array}{cc}{W_{4}} & {W_{4}} \\ {W_{4}} & {-W_{4}}\end{array}\right)=\left( \begin{array}{cccccccc}{1} & {1} & {1} & {1} & {1} & {1} & {1} & {1} \\ {1} & {-1} & {1} & {-1} & {1} & {-1} & {1} & {-1} \\ {1} & {1} & {-1} & {-1} & {1} & {1} & {-1} & {-1} \\ {1} & {-1} & {-1} & {1} & {1} & {-1} & {-1} & {1} \\ {1} & {1} & {1} & {1} & {-1} & {-1} & {-1} & {-1} \\ {1} & {-1} & {1} & {-1} & {-1} & {1} & {-1} & {1} \\ {1} & {1} & {-1} & {-1} & {-1} & {-1} & {1} & {1} \\ {1} & {-1} & {-1} & {1} & {-1} & {1} & {1} & {-1}\end{array}\right)
$$

$$
W_{8}=\left( \begin{array}{cccccccc}{1} & {1} & {1} & {1} & {1} & {1} & {1} & {1} \\ {1} & {1} & {1} & {1} & {-1} & {-1} & {-1} & {-1} \\ {1} & {1} & {-1} & {-1} & {-1} & {-1} & {1} & {1} \\ {1} & {1} & {-1} & {-1} & {1} & {1} & {-1} & {-1} \\ {1} & {-1} & {-1} & {1} & {1} & {1} & {-1} & {1} \\ {1} & {-1} & {-1} & {1} & {-1} & {1} & {1} & {-1} \\ {1} & {-1} & {1} & {-1} & {-1} & {1} & {-1} & {1} \\ {1} & {-1} & {1} & {-1} & {1} & {-1} & {1} & {-1}\end{array}\right)
$$

-----

## 计算举例：

例子转自：[压缩感知——沃尔什-哈达玛(WHT)变换与逆变换](https://blog.csdn.net/geekmanong/article/details/50038611)

$$
f_{1}=\left[ \begin{array}{llll}{1} & {3} & {3} & {1} \\ {1} & {3} & {3} & {1} \\ {1} & {3} & {3} & {1} \\ {1} & {3} & {3} & {1}\end{array}\right]
$$

$$
W_{1}=\frac{1}{4^{2}} \left[ \begin{array}{cccc}{1} & {1} & {1} & {1} \\ {1} & {-1} & {1} & {-1} \\ {1} & {1} & {1} & {-1} \\ {1} & {-1} & {-1} & {1}\end{array}\right] \left[ \begin{array}{rrrr}{1} & {3} & {3} & {1} \\ {1} & {3} & {3} & {1} \\ {1} & {3} & {3} & {1} \\ {1} & {3} & {3} & {1}\end{array}\right] \left[ \begin{array}{cccc}{1} & {1} & {1} & {1} \\ {1} & {-1} & {1} & {-1} \\ {1} & {1} & {-1} & {-1} \\ {1} & {-1} & {-1} & {1}\end{array}\right]=\left[ \begin{array}{cccc}{2} & {0} & {0} & {-1} \\ {0} & {0} & {0} & {0} \\ {0} & {0} & {0} & {0} \\ {0} & {0} & {0} & {0}\end{array}\right]
$$

$$
f_{2}=\left[ \begin{array}{cccc}{1} & {1} & {1} & {1} \\ {1} & {1} & {1} & {1} \\ {1} & {1} & {1} & {1} \\ {1} & {1} & {1} & {1}\end{array}\right]
$$

$$
W_{2}=\frac{1}{4^{2}} \left[ \begin{array}{cccc}{1} & {1} & {1} & {1} \\ {1} & {-1} & {1} & {-1} \\ {1} & {1} & {-1} & {-1} \\ {1} & {-1} & {-1} & {1}\end{array}\right] \left[ \begin{array}{ccc}{1} & {1} & {1} \\ {1} & {1} & {1} \\ {1} & {1} & {1} \\ {1} & {1} & {1}\end{array}\right] \left[ \begin{array}{cccc}{1} & {1} & {1} & {1} \\ {1} & {-1} & {1} & {-1} \\ {1} & {1} & {-1} & {-1} \\ {1} & {-1} & {-1} & {1}\end{array}\right]=\left[ \begin{array}{llll}{1} & {0} & {0} & {0} \\ {0} & {0} & {0} & {0} \\ {0} & {0} & {0} & {0} \\ {0} & {0} & {0} & {0}\end{array}\right]
$$